---
complexity_score: 24.5
converted_at: '2025-08-13T06:59:16.181351Z'
file_type: html
format: html
image_processing_enhanced: true
images_extracted: 25
images_saved: 3
original_path: 353_22112-IPM10141_100Uen.X.html
pictures_extracted: 25
processing_method: docling_multimodal
quality_score: 9.0
source_file: 353_22112-IPM10141_100Uen.X.html
source_zip: en_lzn7931071_r38f.zip
tables_extracted: 12
zip_image_types:
- .svg
- .png
- .gif
- .jpg
- .bmp
zip_images_total: 2796
---

# 

NR Radio Interface-Based Time Monitoring Guideline

Contents

![Image](../images/353_22112-IPM10141_100Uen.X/additional_3_CP.png)

![Image](../images/353_22112-IPM10141_100Uen.X/additional_3_CP.png)

|   1 | Introduction                                                          |
|-----|-----------------------------------------------------------------------|
| 1.1 | General                                                               |
| 1.2 | Scope                                                                 |
| 2   | Radio Interface-Based Time Monitoring Overview and Network   Planning |
| 2.1 | Radio Interface-Based Time Monitoring Overview                        |
| 2.2 | Radio Interface-Based Time Monitoring Network     Planning            |
| 2.3 | Validating Measurements                                               |
| 2.4 | Collecting Data with Ericsson Network Manager                         |
| 2.5 | Evaluating Results                                                    |
| 2.6 | Example Use Case                                                      |
| 3   | Configuration Aspects                                                 |
| 3.1 | Baseband Configurations                                               |
| 3.2 | ENM Configurations                                                    |
| 4   | Solution Guideline Change History                                     |

# 1 Introduction

The purpose of this document is to support solution architects in planning network synchronization accuracy assurance through NR Mid-Band TDD networks by Radio Interface-Based Time Monitoring deployments. This document focuses on the planning of measurements and the evaluation of the results.

This document provides the following information:

- Provides solution architects and network integrators with detailed information on relevant usage in the design aspects of Radio Interface-Based Time Monitoring.
- Radio Interface-Based Time Error measurements can help operators verify the quality of the time synchronization in the network and identify synchronization-related issues.

## 1.1 General

The time difference between the different antenna reference points is defined as Time Alignment Error (TAE). In TDD networks, the maximum TAE must be below 3 µs. Otherwise, a larger TAE can lead to cross-link interference, for example, one gNodeB is receiving while another gNodeB is transmitting. By deploying Radio Interface-Based Time Monitoring, TAE can be measured without site visits.

The reasons for the larger TAE can be the following:

- A problem with GNSS, for example, bad sky visibility or jamming
- A problem with PTP, for example, asymmetrical PTP network, high PDV or PTP unaware nodes

This document provides guidelines on how to plan synchronization measurements through Radio Interface-Based Time Monitoring deployment and how to evaluate results.

For more information, see the following documents:

- Network Synchronization Solution Guideline
- Radio Interface-Based Time Monitoring

## 1.2 Scope

The following items are within the scope of this document:

- Radio Interface-Based Time Monitoring feature overview
- Radio Interface-Based Time Monitoring network planning
- Measurement and evaluation results of Radio Interface-Based Time Monitoring
- Baseband and ENM configurations for Radio Interface-Based Time Monitoring

# 2 Radio Interface-Based Time Monitoring Overview and Network
  Planning

This section describes the Radio Interface-Based Time Monitoring feature and network planning for deployment. It also describes the scenarios used for automatic and manual configurations and how to validate measurements and evaluate results.

## 2.1 Radio Interface-Based Time Monitoring Overview

Radio Interface-Based Time Monitoring can be used for Mid-Band NR TDD cells and is based on the Xn-C connection between them.

The Radio Interface-Based Time Monitoring provides over-the-air measurements for the Over-the-Air Assisted Time Holdover feature. After activating Over-the-Air Assisted Time Holdover feature, gNodeB can use the over-the-air assisting reference to extend holdover when the primary synchronization reference is lost. For more information about Over-the-Air Assisted Time Holdover feature, see the documents as follows:

- Over-the-Air Assisted Time Holdover
- Network Synchronization Solution Guideline.

The figure below shows a network example where the nodes are synchronized through GNSS or PTP G.8275.1. Radio Interface-Based Time Monitoring is activated in these nodes to monitor the TAEs.

![Image](../images/353_22112-IPM10141_100Uen.X/additional_3_CP.png)

Figure 1   Network Overview with Radio Interface-Based Time Monitoring

Both outdoor and indoor nodes can activate the Radio Interface-Based Time Monitoring. When activating time monitoring between indoor-indoor cells or between indoor-outdoor cells, the quality of the measurements depends strongly on the following factors:

- Signal attenuation by the buildings and walls
- Transmission power of the indoor and outdoor cells
- Indoor-indoor or indoor-outdoor radio conditions

If the transmission power is low and the signal attenuation is high, the signal power might be too low to be detected.

Note: Radio Interface-Based Time Monitoring is only supported between NR TDD Mid-Band cells. It does not support between LTE cells.

The following figure shows a setup of Radio Interface-Based Time Monitoring between two gNodeBs.

![Image](../images/353_22112-IPM10141_100Uen.X/additional_3_CP.png)

Figure 2   Radio Interfaced-Based Communication between gNodeBs

Note: The measurements take place every 10 s.

The measured TAEs are saved in the RibTmRelation.pmRibtmTimeErrorDistr PM counter of the monitoring node. For detailed information about the PM counter, see section  Validating Measurements.

## 2.2 Radio Interface-Based Time Monitoring Network
    Planning

To get Radio Interface-Based Time Monitoring measurements, the network needs to be configured as follows:

- A monitoring node that calculates the TAE and reports it into RibTmRelation.pmRibtmTimeErrorDistr PM counter.
- Several assisting nodes that send one-way measurements to the monitoring node.

Each assisting node can also be a monitoring node, as the measurement is bidirectional. It's recommended that two nodes are configured as monitoring and assisting nodes for each other. This configuration gives more reported measurements which in turn can be used when comparing results and fault finding.

Radio Interface-Based Time Monitoring can be either automatically or manually configured in the gNodeB for different scenarios. Each automatically created relation is validated every 5 min to remove bad relations and add new ones. Manual configuration of Radio Interfaced-Based Time Monitoring requires manually adding new relations or removing bad relations.

Autoconfiguration is recommended because it is easy to get reliable measurement data without manual maintenance.

### 2.2.1 Automatically Selecting Cell Pairs for Radio
      Interface-Based Time Monitoring

Autoconfiguration of Radio Interface-Based Time Monitoring select cell pairs automatically. It is recommended to enable automatic configuration of Radio Interface-Based Time Monitoring in the whole network, as the resource consumption is negligible. As shown in the figure below, when this feature is activated in the whole network, reliable measurements of the entire network can help identify synchronization-related problems.

![Image](../images/353_22112-IPM10141_100Uen.X/additional_3_CP.png)

Figure 3   Overlapping Clusters of Radio Interface-Based Time Monitoring Measurements

Autoconfiguration of Radio Interface-Based Time Monitoring creates the attribute RibTmRelation automatically. The maximum number of automatically created relations can be configured in the monitoring node. The range is from 0 to 20, where the default value 0 means autoconfiguration is disabled. For more details about autoconfiguration, see section  Autoconfiguration of Radio Interface-Based Time Monitoring.

Note: Automatic creation and evaluation of Radio Interface-Based Time Monitoring cell pairs take time. It can take several hours or even days before all cell pairs that provide reliable measurements are found.

### 2.2.2 Manually Selecting Cell Pairs for Radio Interface-Based
      Time Monitoring

In some cases, manually activating Radio Interface-Based Time Monitoring in the selected nodes is more efficient than using autoconfiguration to create and evaluate cell pairs. A good practice is to have a node with a well-calibrated and trusted synchronization reference configured as a monitoring node.

Manual configuration is suitable to the following examples:

- Nodes with a bad KPI. Radio Interface-Based Time Monitoring can be used to find out if it is caused by synchronization problems. The node can be a monitoring node.
- A node with GNSS is connected directly to the Baseband. This node is guaranteed to be very accurate, so it can be used as a benchmark for synchronization. This node can be a monitoring node.
- When there are nodes with very robust synchronization solutions so that they can provide holdover assistance over-the-air. These nodes can be assisting nodes.
- Choose areas where synchronization issues are suspected. Radio Interface-Based Time Monitoring measurements can be used for these areas.

The attribute RibTmRelation need to be created manually in the monitoring node cells. The maximum number of manually created relations are the same as automatically created. Cells on the assisting nodes must be selected within a 15 km distance of the monitoring node antenna (less for low power cells). To get measurements, the antennas of the monitoring node and the assisting node must be partially directed towards each other. This enables good communications and cell relations.

As shown in the figure below, the blue monitoring node is surrounded by six assisting nodes with the same frequency antenna. In addition to the blue monitoring node, the antennas marked with blue circles can be used as the cells of the assisting nodes, which are directed towards the antennas of the blue monitoring node. The red and blue antennas use different frequencies, so they cannot be connected to the same monitoring node.

![Image](../images/353_22112-IPM10141_100Uen.X/additional_3_CP.png)

Figure 4   Monitoring and Assisting Nodes in the Map

## 2.3 Validating Measurements

The quality of the measurements is automatically evaluated.

The monitoring node calculates the TAE with the measurement data received from the assisting node. The RibTmRelation.pmRibtmTimeErrorDistr PM counter in the monitoring gNodeB is pegged only when the measurement quality of the assisting node, as indicated by the RibTmRelation.measurementQuality attribute, is RELIABLE.

The measurement TAE is sorted into 14 bins of the RibTmRelation.pmRibtmTimeErrorDistr PM counter, where each bin represents an interval of 500 ns. The table below shows the measurement range. Opening brackets indicate that the value is included, and closing brackets are for excluding the value. Bins 6 and 7 are time-aligned (between 500 ns and -500 ns). Bins 0 and 13 are outside the 3 µs range required for the PTP time and phase synchronization.

| Bins    | Ranges (ns)    |
|---------|----------------|
| Bin[0]  | [..-3000[      |
| Bin[1]  | [-3000..-2500[ |
| Bin[2]  | [-2500..-2000[ |
| Bin[3]  | [-2000..-1500[ |
| Bin[4]  | [-1500..-1000[ |
| Bin[5]  | [-1000..-500[  |
| Bin[6]  | [-500..0[      |
| Bin[7]  | [0..500]       |
| Bin[8]  | ]500..1000]    |
| Bin[9]  | ]1000..1500]   |
| Bin[10] | ]1500..2000]   |
| Bin[11] | ]2000..2500]   |
| Bin[12] | ]2500..3000]   |
| Bin[13] | ]3000..]       |

Note: Autoconfiguration automatically removes RibTmRelation MOs giving unreliable measurements.

For a more detailed interpretation of PM counters, see Radio Interface-Based Time Monitoring.

## 2.4 Collecting Data with Ericsson Network Manager

In Ericsson Network Manager (ENM), three sub-applications are available to handle PM counters for Radio Interface-Based Time Monitoring as follows:

- PM Initiation and Collection
- KPI Management
- Network Health Monitor (NHM)

The Radio Interface-Based Time Monitoring measurements can be aggregated on a per-node basis. ENM can be used to establish and collect PM measurements.

ENM can collect measurement data after creating PM counter RibTmRelation.pmRibtmTimeErrorDistr in PM Initiation and Collection. Then an appropriate formula is created in KPI Management to handle the measurement data of this PM counter, for example, which bins can be used in the formula. For detailed information about this KPI formula, see section  ENM Parameters.

The NHM uses the created KPI to monitor TAE by creating a dashboard report in the worst performance nodes. All relations are aggregated per node in NHM and can pinpoint the nodes that have a high TAE. NHM can also set the KPI performance threshold that triggers an alarm, for example, an alarm is raised if there is a distribution in bin 0 or 13. For detailed information about NHM configurations, see section  ENM Configurations.

For more information about NHM in ENM, see the following library and document:

- The Ericsson Network Manager library
- ENM Network Health Monitor KPI in the Ericsson Network Manager library

## 2.5 Evaluating Results

The measurement in the monitoring and assisting nodes must be taken during a longer period to get useful results, for example, the measurement period can be an hour or a week. Continuous monitoring is recommended as it can provide reliable measurement data for troubleshooting in case of synchronization-related issues.

The measurement data is saved in the 14 bins of the RibTmRelation.pmRibtmTimeErrorDistr PM counter. The distribution of the PM counter values can indicate different synchronization problems of the network, for example, samples constantly displayed in bin 6 and bin 7 are well-aligned with little TAE. Studying bin distribution can point to possible synchronization issues. The results are different if you look at single cell relations or if they are aggregated per node.

The table below shows the measured result from a single cell relation.

| Dominant Bins                                         | Scenario                  | Description                                                                                                                                                          | Action Needed                                                                                                                                                                                                                                                                                  |
|-------------------------------------------------------|---------------------------|----------------------------------------------------------------------------------------------------------------------------------------------------------------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| Bins 6 and 7                                          | No synchronization issues | There are no synchronization problems between the measured cells.                                                                                                    | N/A                                                                                                                                                                                                                                                                                            |
| Bin 0 or 13                                           | Synchronization issue     | The TAE is 3 µs or more.                                                                                                                                             | Compare with measurements towards other nodes. If Bin 0 and 13 are also presented, the node is not time aligned to its neighbors and synchronization needs to be investigated.                                                                                                                 |
| Single-bin, or two consecutive bins other than 6 or 7 | Stable offset             | If only one bin, or two consecutive bins other than 6 or 7, are dominant, it can indicate a TAE between the measured cells. In this scenario, the TAE is acceptable. | Bins 3–8: No action. The Time Error is ±2 µs. Bins 1, 2, 11, and 12: Monitor over time for Time Error increase.                                                                                                                                                                                |
| Few bins                                              | Phase jump                | Values constantly fill one bin, and then start filling another bin. This bin is not necessarily consecutive.                                                         | Continue measurements. If the same continues to happen, the system must be checked.                                                                                                                                                                                                            |
| No bins or all bins stopped adding measurements       | Phase jump                | The measurement disappears in the statistical cycle.                                                                                                                 | Suspicion of the very large phase jump, then PTP time offset PM counters need to be checked if available. For example, the transport nodes can introduce an error of several milliseconds when restarted, such large offset is not possible to be measured, then it will disappear completely. |
| Few bins                                              | Phase drift               | A constantly increasing phase offset results in a spread over several consecutive bins, with each bin being filled over a longer period.                             | Measure over time. If the values continue to drift, the system must be checked for synchronization issues.                                                                                                                                                                                     |

The table below shows aggregated PM counters of NR cell relations per node. Because of the aggregation, other considerations are needed.

| Dominant Bins                                         | Scenario                  | Description                                                                                                                              | Action Needed                                                                                                                                                                 |
|-------------------------------------------------------|---------------------------|------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| Bins 6 and 7                                          | No synchronization issues | There are no synchronization problems between the measured cells. All cells are well time aligned to each other.                         | N/A                                                                                                                                                                           |
| Bin 0 or 13                                           | Synchronization issue     | The TAE is 3 µs or more. The node is not synchronized with its neighbors.                                                                | Verify the node synchronization solution and find the source of the synchronization issue.                                                                                    |
| Single-bin, or two consecutive bins other than 6 or 7 | Stable offset             | All aggregated nodes show stable offsets between the assisting nodes in the measured monitoring node. (1)                                | Bins 3–8: Nothing. The time Error is ±2 µs. Bins 1, 2, 11, and 12: Monitor over time, if it increases or decreases towards bins 0 and 13.                                     |
| Changing over time                                    | Phase jump                | Values constantly fill one bin, and then start filling another bin. This bin is not necessarily consecutive.                             | If the bins remain about the same relative to each other, but the median moves, then the monitoring node can have a phase jump. If this continues, the node must be checked.  |
| Changing over time                                    | Phase drift               | A constantly increasing phase offset results in a spread over several consecutive bins, with each bin being filled over a longer period. | If the bins remain about the same relative to each other, but the median moves, then the monitoring node can have a phase drift. If this continues, the node must be checked. |
| Multiple random bins                                  | TAE in the network        | Multiple neighbor cells have the wrong time.                                                                                             | Verify synchronization accuracy of the monitoring node, then check measurements per cell pair and address large TAEs of the neighbor nodes.                                   |

(1) A cell with values indicating phase offset shows that the offset is in multiple relations.

The following five figures show examples of these scenarios mentioned above.

![Image](../images/353_22112-IPM10141_100Uen.X/additional_3_CP.png)

Figure 5   Stable Time Error ± 500 ns

![Image](../images/353_22112-IPM10141_100Uen.X/additional_3_CP.png)

Figure 6   Phase Jump or Phase Drift

![Image](../images/353_22112-IPM10141_100Uen.X/additional_3_CP.png)

Figure 7   PM Distribution over Time with Phase Jump

![Image](../images/353_22112-IPM10141_100Uen.X/additional_3_CP.png)

Figure 8   Stable Offset

![Image](../images/353_22112-IPM10141_100Uen.X/additional_3_CP.png)

Figure 9   Stable Offset on Bin Border

Summary of issues:

- Phase jump: Samples constantly in one bin move to another bin.
- Phase drift: Samples are spread over several consecutive bins over time; each bin being filled in a certain period.
- Stable offset: Different synchronization paths create different Time Errors. As long as it is below 3 μs, the requirement is fulfilled, and there is no synchronization issue.
- Time Alignment Error above 3 μs: Bins 0 and 13 are filled and time synchronization is not fulfilling the requirement.

When having offset in the measurement result, it is useful to compare it with the synchronization design of the network. It is expected that the Time Alignment Error between two nodes with GNSS is low, as they have the same GNSS source, with no nodes in between them. When G.8275.1 or G.8275.2 is used, the Time Alignment Error is larger and the distribution among several bins is greater.

When a potential issue is located, measurement must be continued for a longer period, to see the trends in the measurements. In addition, adding measurements to other nodes makes it possible to compare the results and to pinpoint exactly where the issue is. These additional measurements are made to confirm the issue or rule out any synchronization issue. A site visit can be done after confirming the synchronization issue.

For more detailed interpretation of PM counters, see Radio Interface-Based Time Monitoring.

The figure below shows an example where operator identifies Baseband nodes that have large TAEs relative to other nodes measured by Radio Interface-Based Time Monitoring (see the red lines).

![Image](../images/353_22112-IPM10141_100Uen.X/additional_3_CP.png)

Figure 10   Large TAE Measured by Radio Interface-Based Time Monitoring

Once this happens, operator needs to analyze the synchronization solution for that node accordingly:

- If the node is synchronized by PTP, the attribute PtpBcOcPort.asymmetryCompensation need to be set with a more appropriate value. For more information, see IEEE 1588 Time and Phase Synchronization.
- If the node is synchronized by GNSS, the GNSS antenna installation must be checked to ensure that it has good sky visibility and the attribute TimeSyncIO.compensationDelay need to be set correctly so that it corresponds to the delay of GNSS antenna cable. For more information about how to calculate the compensation delay, see GNSS Receiver System User Guide.

## 2.6 Example Use Case

The Baseband node supports PTP characteristics measurement for Time and Phase Synchronization based on ITU-T Standards. The PTP characteristics monitoring function measures the Time Error (TE) related to the GNSS local reference. Therefore, this measurement can be considered as an absolute value for the time difference at a certain Baseband node. The Radio Interface-Based Time Monitoring measures the relative TE between a given NR TDD mid-band Baseband node and its neighbor NR TDD mid-band Baseband nodes.

These two functions can be combined in the network synchronization optimization activities. The following subsections show the example use cases to be used to detect network asymmetries and PTP issues.

### 2.6.1 Example of Network Asymmetry Detection

If a Baseband node's absolute TE exceeds the G.8271.1 limits, as measured by the PTP characteristics monitoring function, other affected nodes can be identified by examining Baseband nodes with very low relative TE using Radio Interface-Based Time Monitoring.

Additionally, with access to the network synchronization plan, it is possible to determine if specific areas are affected. This might occur if all Baseband nodes are served by the same T-BC.

The figure below shows the three Baseband nodes with the absolute TE beyond the G.8271.1 limit (1.1 µs). MBH1\_Node1 and MBH1\_Node2 share the same mobile backhaul network (MBH1). MBH2\_Node1 uses a different mobile backhaul network (MBH2).

![Image](../images/353_22112-IPM10141_100Uen.X/additional_3_CP.png)

Figure 11   Baseband Node with Absolute TE beyond the G.8271.1 Limit

When combined with the Radio Interface-Based Time Monitoring data for nodes within the same mobile backhaul (Peer Feeder: MBH1), the Section 1 of the figure below shows that MBH1\_Node3 and MBH1\_Node4 have the lowest relative TE with MBH1\_Node2. This indicates that they also suffer from a high TE issue because the absolute TE of MBH1\_Node2 exceeds the 1.1 µs limit.

![Image](../images/353_22112-IPM10141_100Uen.X/additional_3_CP.png)

Figure 12   Example Visualization of the RIB-TM Data for High Absolute TE Nodes

If Baseband nodes connected to different T-BCs have very low relative TE, they might also experience the excessive TE. In Section 2 of the figure above, it shows that MBH3\_Node1 and MBH1\_Node2 have a very low relative TE (within 500 ns), similar to the value measured between MBH1\_Node3 and MBH1\_Node2. This indicates that MBH3\_Node1 might also have a large absolute TE.

In Section 3 of the figure above, nodes in MBH1 have a very low relative TE (within 500 ns). However, the relative TE between MBH4\_Node7 and MBH1\_Node2 is within 500 ns and it shows a reverse offset. This indicates a likely asymmetry in MBH4 that needs to be compensated accordingly.

### 2.6.2 Example of Both PTP Issues and Network Asymmetry
      Detection

If a Baseband node's absolute TE significantly exceeds to the G.8271.1 limits, and its neighbor nodes also have high relative TE with it. Whether these neighbor nodes share the same backhaul network, there can be a problem. Combining PTP characteristics monitoring function with Radio Interface-Based Time Monitoring can help detect PTP issues and network asymmetry problems. Additionally, with access to the network synchronization plan, it is possible to determine if specific areas are affected.

The figure below shows the PTP characteristics monitoring and Radio Interface-Based Time Monitoring statistics of the Baseband node (MBH1\_Node1) where the microwave backhaul network is used. It exhibits a significantly high low-pass TE of MBH1\_Node1, nearly reaching -10 µs. From the statistics in Section 1, the relative TE is quite high between MBH1\_Node1 and all other nodes within MBH1. In this example, MBH1\_Node2 and MBH1\_Node3 are connected to the same T-BC within MBH1, and they all have a relative TE greater than -3 µs towards the MBH1\_Node1. Considering the MBH1\_Node1 has very high absolute TE, then the immediate conclusion is that there might be a PTP issue related to the microwave backhaul network where MBH1 is connected to.

![Image](../images/353_22112-IPM10141_100Uen.X/additional_3_CP.png)

Figure 13   Example Visualization of Absolute TE of MBH1\_Node1 and the RIB-TM Data for Nodes under MBH1, MBH2 and MBH3

After reconfiguring microwave backhaul network (for example, the T-BC) for MBH1, the situation has changed, as shown in the figure below. Section 1 shows that the relative TE between MBH1\_Node1 and all other nodes within MBH1 are improved from over -3 µs to mostly within 0.5 µs. This change confirms the initial suspicion of the PTP issue in the microwave backhaul network. However, the relative TE in other clusters (MBH2 and MBH3) remains high, and it also has a reverse offset in this case. This indicates a potential asymmetry problem in the backhaul network used for distributing the PTP reference towards MBH2 and MBH3, which needs further investigations.

![Image](../images/353_22112-IPM10141_100Uen.X/additional_3_CP.png)

Figure 14   Example Visualization of the RIB-TM Data for Nodes under MBH1, MBH2 and MBH3 after Microwave Backhaul Reconfiguration for MBH1

# 3 Configuration Aspects

This section describes the activation method for Radio Interface-Based Time Monitoring in Baseband and the collection and monitoring of measurement data in ENM.

## 3.1 Baseband Configurations

This section describes the automatic and manual activation methods for the Radio Interface-Based Time Monitoring respectively.

For more information about Radio Interface-Based Time Monitoring, see Radio Interface-Based Time Monitoring.

### 3.1.1 Prerequisites for Radio Interface-Based Time Monitoring
      Configuration

Before activating this feature, Xn-C connections are needed to be set up between monitoring and assisting nodes.

In the NR SA network, Xn-C connections are already automatically created by the Automated Neighbor Relation (ANR) feature because it is required by the handover. For more information, see NR SA Connectivity Guideline with Option 2 and Xn Configuration.

In the NR NSA network, a proprietary Xn-C connection can be created automatically, but the following prerequisites must be fulfilled if not already done:

- Activate the ANR feature in the eNodeB by setting the attribute featureState to ACTIVATED in the featureState=CXC4010620 MO instance.
- Set the attributes AnrFunctionNR.anrEndcX2Enabled and AnrFunctionNR.anrAutoCreateXnForEndc to true in gNodeBs.
- For the default TN configuration, create the LocalSctpEndpoint MO under the EndpointResource MO that is referred by GNBCUCPFunction.endpointResourceRef with the LocalSctpEndpoint.interfaceUsed attribute set to Xn.
- Restart gNodeBs. Due to the attributes interfaceUsed and sctpEndpointRef need a restart to take effect.

Note: The same IP address for EN-DC X2 and Xn interface must be configured.

The table below shows the attributes of NSA Xn-C related MOs for gNodeBs. For more information about ANR, see NR Automated Neighbor Relations and NR NSA Connectivity Guideline with Option 3x.

| MO                | Attribute              | Setting                                                                                      |
|-------------------|------------------------|----------------------------------------------------------------------------------------------|
| AnrFunctionNR=1   | anrEndcX2Enabled       | TRUE (Means ANR feature actived to create NR to NR cell relations)                           |
| AnrFunctionNR=1   | anrAutoCreateXnForEndc | TRUE (Allow automatic creation of Xn connection for NR cell relations)                       |
| GNBCUCPFunction   | endpointResourceRef    | Refer to EndpointResource MO that is the parent MO to LocalSctpEndpoint MO to be used for Xn |
| SctpEndpoint      |                        | Create a new MO instance for Xn                                                              |
| LocalSctpEndpoint | interfaceUsed          | 6 (Xn)                                                                                       |
| LocalSctpEndpoint | sctpEndpointRef        | It is a reference to an instance of SctpEndpoint MO                                          |

### 3.1.2 Autoconfiguration of Radio Interface-Based Time
      Monitoring

Before activating autoconfiguration of Radio Interface-Based Time Monitoring, make sure that the appropriate Xn-C connections are configured, and set them up if they are not already.

The main steps of activating Radio Interface-Based Time Monitoring autoconfiguration are as follows:

Step 1: Install and activate the Radio Interface-Based Time Monitoring license on all nodes

- Set the attribute featureState to ACTIVATED in the featureState=CXC4012388 MO instance.

Step 2: Allow the automatic creation of RibTmRelation MOs

- Set the attribute GNBCUCPFunction.ribTmAutoMax to 20. The attribute GNBCUCPFunction.ribTmAutoMax is the maximum number of RibTmRelation MOs created per NRCellCU, ranging from 0 to 20 (0 means Radio Interface-Based Time Monitoring autoconfiguration is deactivated).

Step 3: Collect RibTmRelation.pmRibtmTimeErrorDistr counters in ENM

- Create a subscription in PM Initiation and collection subscription within ENM. For more information, see section ENM Configurations.

### 3.1.3 Manual Configuration of Radio Interface-Based Time
      Monitoring

Before manually configuring Radio Interface-Based Time Monitoring, a Xn-C connection is required between the monitoring and the assisting gNodeBs. It can be created automatically or manually, for example, when two gNodeBs are distant, the Xn-C connection needs to be created manually. For more information about the Xn-C connection, see section  Prerequisites for Radio Interface-Based Time Monitoring Configuration.

The main steps to activate the manual configuration of Radio Interfaced-Based Time Monitoring are as follows:

1. Set the attribute TermPointToGNodeB.administrativeState to UNLOCKED in the monitoring and assisting nodes. Then check the status of the attribute TermPointToGNodeB.operationalState, which is ENABLED.

2. Check ExternalNRCellCU and NRFrequency MOs in the monitoring gNodeB, where the cell and frequency are correctly configured with the assisting cell.

3. Create RibTmRelation MOs in the monitoring gNodeB and set the attribute peerCellRef to the selected assisting cell. Then set the attribute RibTmRelation.administrativeState to UNLOCKED.

### 3.1.4 Parameters to Check Status

To see if monitoring is working between the nodes, RibTmRelation.OperationalState attribute can be checked in the monitoring node. The cause for failure is shown in the RibTmRelation.availabilityStatus and RibTmRelation.additionalInfo attributes.

| Attribute          | Value                                                                                                                     |
|--------------------|---------------------------------------------------------------------------------------------------------------------------|
| OperationalState   | ENABLED, shows that relations can be established, and DISABLE shows that relations failed.                                |
| peerCellRef        | Reference to the assisting cell. Can be used to check where relations are active.                                         |
| availabilityStatus | The availability status. It contains details about operationalState and complies with the specification: ITU-T Rec. X.731 |
| additionalInfo     | Information about any Radio Interface-Based Time Monitoring error.                                                        |
| measurementQuality | Quality of Radio Interface-Based Time Monitoring measurements.                                                            |

RibTmRelation.OperationalState attribute can be disabled because of the following reasons:

- Configuration mismatch
- Not supported combinations
- Missing license
- Limit reached for the number of the monitored cell relations

## 3.2 ENM Configurations

This section introduces sub-applications and configurations in ENM used for Radio Interface-Based Time Monitoring evaluation and fault finding.

### 3.2.1 ENM Parameters

Two sub-applications of ENM: PM Initiation and Collection and KPI Management are used for creating PM counter and KPI respectively. For more details, see section  Collecting Data with Ericsson Network Manager.

The detailed steps are described as follows.

To create KPIs:

Steps

1. Create a subscription for the counter RibTmRelation\_GNBCUCP in PM Initiation and Collection, as shown in the figure below:

![Image](../images/353_22112-IPM10141_100Uen.X/additional_3_CP.png)

Figure 15   Create a PM counter

2. Create the Radio Interface-Based Time Monitoring KPI for NHM in KPI Management as follows:

1). Click Create KPI button as shown in the following figure:

![Image](../images/353_22112-IPM10141_100Uen.X/additional_3_CP.png)

Figure 16   KPI Management

2). Input the KPI name; select the RadioNode, NRCellCU, and RibTmRelation as highlighted in the figure below:

![Image](../images/353_22112-IPM10141_100Uen.X/additional_3_CP.png)

Figure 17   Create Key Performance Indicator

3). To add the formula, the character @ plus keywords can be used to filter counter names as shown in the figure below, for example, @pmrib.

![Image](../images/353_22112-IPM10141_100Uen.X/additional_3_CP.png)

Figure 18   Add a Formula in KPI Management

4). The formula is added by SUM\_ACROSS(RibTmRelation:pmRibtmTimeErrorDistr[X]), where X is on behalf of the bins to be added. The formula that summarized all bins is shown in the following section (all bins):

This covers all bins. However only the bins of interest must be chosen with appropriate formula.

3. Enable system threshold; set threshold value to 0.5; select larger value is better. As shown in the figure below, a threshold of 0.5 means that the KPI is triggered when 50% of TAE has reached above 1000 ns or below -1000 ns.

For example, for the KPI to trigger when there is more than 50% of the TAE measurements above 1000 ns or below -1000 ns, meaning 50% of the measurements is not in the bin from 5 to 8, do it by adding all good bins and divide by all bins. The formula is as follows:

![Image](../images/353_22112-IPM10141_100Uen.X/additional_3_CP.png)

Figure 19   Set System Threshold in KPI Management

4. Select the nodes to be measured in the Nodes tab, as shown in the figure below:

![Image](../images/353_22112-IPM10141_100Uen.X/additional_3_CP.png)

Figure 20   Add Network Objects in KPI Management

5. Select the created KPI name and click ACTIVATE, as highlighted in the following figure:

![Image](../images/353_22112-IPM10141_100Uen.X/additional_3_CP.png)

Figure 21   Activate Configured KPI in KPI Management

To enable the KPIs in NHM:

6. In NHM, click the setting of Worst Performing Nodes By KPI, as highlighted in the following figure. Then the Widget Setting window pops up, select the configured KPI and save it.

![Image](../images/353_22112-IPM10141_100Uen.X/additional_3_CP.png)

Figure 22   Enable the KPI in NHM

7. Right click the node and select Enable Supervision in the Alarm Monitor, as shown in the figure below:

![Image](../images/353_22112-IPM10141_100Uen.X/additional_3_CP.png)

Figure 23   Enable Supervision in Alarm Monitor

# 4 Solution Guideline Change History

This section summarizes the major changes introduced in each document release.

| Release   | Main Changes                                                                                                                                                  |
|-----------|---------------------------------------------------------------------------------------------------------------------------------------------------------------|
| 25.Q1     | Add two example use cases by combining PTP characteristic measurement and Radio Interface-Based Time Monitoring to detect network asymmetries and PTP issues. |
| 24.Q4     | Updated instructions on how to handle large TAEs.                                                                                                             |
| 23.Q2     | Optimized auto-configuration and RIB TM and OTA for Indoor deployments.                                                                                       |