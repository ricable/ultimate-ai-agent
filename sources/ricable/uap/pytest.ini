# UAP Backend Testing Configuration
[tool:pytest]
testpaths = backend/tests
python_files = test_*.py
python_classes = Test*
python_functions = test_*
addopts = 
    --strict-markers
    --strict-config
    --verbose
    --tb=short
    --cov=backend
    --cov-report=html
    --cov-report=term-missing
    --cov-fail-under=80
    --asyncio-mode=auto
    --disable-warnings

markers =
    unit: Unit tests
    integration: Integration tests
    performance: Performance tests
    websocket: WebSocket tests
    agent: Agent-related tests
    orchestrator: Orchestrator tests
    slow: Slow running tests
    api: API endpoint tests

# Performance test thresholds (from plan.md requirements)
performance_thresholds =
    agent_response_time_p95 = 2.0  # seconds
    ui_load_time_tti = 1.0  # seconds
    websocket_connection_stability = 99.9  # percentage
    concurrent_websocket_sessions = 1000
    monthly_uptime = 99.9  # percentage

# Test data directories
test_data_dir = tests/data
fixtures_dir = tests/fixtures

# Async test configuration - using auto mode
asyncio_mode = auto
asyncio_default_fixture_loop_scope = function

# Coverage configuration
[coverage:run]
source = backend
omit = 
    */tests/*
    */test_*
    */__init__.py
    */venv/*
    */virtualenv/*

[coverage:report]
exclude_lines =
    pragma: no cover
    def __repr__
    raise AssertionError
    raise NotImplementedError
    if __name__ == .__main__.: